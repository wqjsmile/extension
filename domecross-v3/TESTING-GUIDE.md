# Domecross V3 测试指南

## 安装测试

### 1. 准备环境
- Chrome浏览器版本 ≥ 88
- 开启开发者模式: 访问 `chrome://extensions/` 并启用"开发者模式"

### 2. 安装步骤
1. 点击"加载已解压的扩展程序"
2. 选择 `domecross-v3` 目录
3. 确认扩展出现在扩展列表中
4. 检查扩展图标显示在工具栏

### 3. 初始验证
- [ ] 扩展成功加载，无错误提示
- [ ] 点击扩展图标能打开popup界面
- [ ] Console中无严重错误信息

## 功能测试

### 基础功能
1. **Popup界面测试**
   - [ ] 界面正常显示
   - [ ] 能够显示当前网站URL
   - [ ] 按钮响应正常

2. **网站域名识别**
   - [ ] 访问不同网站时URL正确更新
   - [ ] 域名解析正确

### 代理功能测试

1. **代理模式切换**
   - [ ] 点击"关闭"按钮，代理关闭
   - [ ] 点击"一直"按钮，提示选择服务器
   - [ ] 点击"按需"按钮，提示选择服务器

2. **服务器选择**
   - [ ] 点击"切换测试点"打开服务器列表
   - [ ] 能够加载服务器列表（如果服务可用）
   - [ ] 选择服务器后返回主界面

3. **域名列表管理**
   - [ ] 点击"将当前网站加入多点测试"
   - [ ] 检查域名状态切换
   - [ ] 点击垃圾桶图标移除域名

### 页面交互测试

1. **标签页操作**
   - [ ] 重新加载页面功能正常
   - [ ] 切换标签页时状态更新

2. **页面跳转**
   - [ ] 设置按钮能打开选项页面
   - [ ] 登录页面正常打开（如果未登录）

## 开发者工具检查

### Chrome扩展页面检查
1. 访问 `chrome://extensions/`
2. 找到Domecross扩展
3. 检查以下内容：
   - [ ] 扩展状态为"已启用"
   - [ ] 版本号显示正确
   - [ ] 权限列表完整

### Service Worker检查
1. 在扩展详情页点击"Service Worker"
2. 检查Console输出：
   - [ ] 无错误信息
   - [ ] 有初始化日志
   - [ ] 心跳日志正常

### Popup页面检查  
1. 右键点击扩展图标选择"检查"
2. 查看Console：
   - [ ] V3适配器加载成功
   - [ ] Angular应用初始化成功
   - [ ] 无JavaScript错误

## 常见问题排查

### 如果扩展无法加载
1. 检查manifest.json语法
2. 确认所有引用文件存在
3. 查看Chrome扩展页面的错误信息

### 如果Popup无法打开
1. 检查popup.html是否存在
2. 验证JavaScript文件路径
3. 查看service worker console

### 如果功能异常
1. 检查service worker状态
2. 验证权限设置
3. 查看网络请求是否正常

## 性能监控

### 内存使用
- 在任务管理器中监控扩展内存使用
- Service Worker应该在空闲时自动终止

### 网络请求
- 监控后台网络请求
- 确认请求域名在权限列表中

### 存储使用
- 检查chrome.storage数据
- 验证localStorage迁移正确性

## 已知限制

1. **首次安装**
   - 可能需要刷新已打开的页面
   - localStorage数据需要时间同步

2. **代理功能**
   - 需要有效的服务器配置
   - 某些网络环境可能受限

3. **兼容性**
   - 仅支持Chrome/Chromium浏览器
   - 需要Manifest V3支持

## 测试报告模板

```
测试时间: ___________
Chrome版本: ___________
扩展版本: v8.10.12

基础功能:
□ 安装成功  □ Popup正常  □ 域名识别  

代理功能:
□ 模式切换  □ 服务器选择  □ 列表管理

页面交互:
□ 标签页操作  □ 页面跳转  □ 设置功能

发现问题:
1. ________________
2. ________________

整体评价: □ 优秀  □ 良好  □ 需要改进
```

## 下一步计划

测试完成后，根据结果：

1. **如果测试通过**: 可以考虑发布到Chrome Web Store
2. **如果有问题**: 根据问题严重程度决定修复优先级
3. **性能优化**: 基于测试结果进行性能调优
4. **功能增强**: 考虑添加V3新特性
